# AI Job Automation Implementation Plan

This document outlines the strategy to integrate AI and external APIs into the Makjuz Academy Placement/Jobs platform to fully automate job discovery, matching, and application processes.

## 1. Overview
The goal is to transform the manual "Jobs" page into an intelligent, automated career assistant. 
**Key Automations:**
1.  **Auto-Fetch Jobs**: Automatically pull real-time job listings from the internet (LinkedIn, Indeed, Glassdoor, etc.) via an Aggregator API.
2.  **AI Match Score**: Use an LLM (Large Language Model like OpenAI/Gemini) to analyze a candidate's resume against a job description for a semantic "Match Score" rather than just keyword matching.
3.  **One-Click Cover Letter**: Generate a tailored, professional cover letter instantly using AI based on the user's profile and the specific job requirements.

---

## 2. Architecture & Security (Crucial)

### API Key Management
*   **NEVER** expose API keys (OpenAI, RapidAPI, etc.) on the Frontend (React).
*   **Backend Proxy**: All requests to external AI/Job services MUST go through your Node.js/Express backend.
*   **Environment Variables**: Store keys in the backend `.env` file.

**`.env` Structure:**
```env
OPENAI_API_KEY=sk-...
RAPIDAPI_KEY=...
RAPIDAPI_HOST=jsearch.p.rapidapi.com
```

### Data Flow
1.  **Frontend**: User clicks "Find Jobs" -> Requests `/api/jobs/external?query=React`.
2.  **Backend**: Receives request -> Adds API Key header -> Calls External API (e.g., JSearch).
3.  **Backend**: Receives raw job data -> Sanitizes/Formats it > Returns to Frontend.

---

## 3. Implementation Phases

### Phase 1: Automated Job Aggregation (Real-Time Jobs)
instead of manually posting jobs, fetch them from the web.

*   **API Choice**: [JSearch via RapidAPI](https://rapidapi.com/letscrape-6bRBa3QguO5/api/jsearch) (Recommended for ease of use & free tier).
*   **Backend Endpoint**: `GET /api/jobs/external`
    *   **Logic**: Accepts `query`, `location`, `remote` params. Calls JSearch API.
    *   **Caching**: Implement Redis or simple memory caching to save API calls (e.g., cache results for "React Developer" for 1 hour).
*   **Frontend**:
    *   Add a "Search Web Jobs" toggle or separate tab.
    *   Display these external jobs using the existing `JobCard` component (map fields: `job_title` -> `role`, `employer_name` -> `company`).

### Phase 2: AI Resume Matching & Analysis
Replace simple skill matching with deep semantic analysis.

*   **API Choice**: OpenAI API (GPT-4o or GPT-3.5-turbo) or Google Gemini API.
*   **Backend Endpoint**: `POST /api/jobs/analyze-match`
    *   **Input**: `resumeText` (extracted from PDF profile) + `jobDescription`.
    *   **AI Prompt**: 
        > "Analyze the fit between this Resume: {resume} and Job: {job}. Return a JSON with: { score: 0-100, missingSkills: [], analysis: '...' }"
*   **Frontend**:
    *   Show a "Analyze Fit" button on every job card.
    *   Display a match percentage gauge (ðŸŸ¢ Green > 80%, ðŸŸ¡ Yellow > 50%, ðŸ”´ Red < 50%).
    *   Show "Missing Skills" checklist generated by AI.

### Phase 3: Automated Application Kit (Cover Letters)
Generate application materials instantly.

*   **Backend Endpoint**: `POST /api/jobs/generate-cover-letter`
    *   **Input**: `userId`, `jobId`.
    *   **Logic**: Fetch User Profile + Job Details from DB.
    *   **AI Prompt**:
        > "Write a professional cover letter for {condidateName} applying to {company} for {role}. Highlight their experience in {skills}. keep it under 200 words."
*   **Frontend**:
    *   In the "Apply" modal, add a "âœ¨ Generate with AI" button next to the Cover Letter text area.
    *   Stream or type-write the generated text into the input field.

---

## 4. Technical Steps to Execute

### Step 1: Backend Setup
1.  Install dependencies: `npm install axios openai`
2.  Configure `dotenv` for API keys.
3.  Create `services/aiService.js` and `services/jobAggregatorService.js` to handle external calls clean & separately.

### Step 2: Create Controller Methods (`controllers/placementController.js`)
*   `getExternalJobs`: Handler for JSearch.
*   `analyzeJobFit`: Handler for OpenAI/Gemini analysis.
*   `createCoverLetter`: Handler for text generation.

### Step 3: Frontend Integration (`pages/Placement.tsx`)
1.  Add state for `isExternalSearch` (Boolean).
2.  Update `fetchJobs` to call the new endpoint if external search is active.
3.  Add "âœ¨ AI Analysis" badge processing logic to Job Cards.
4.  Update Application Modal with the "Generate Cover Letter" button.

## 5. Estimated Effort
*   **Setup**: 1-2 hours (Keys, Env, Basic Service wrappers).
*   **Job Fetching**: 2-3 hours (API integration, Mapping fields, UI updates).
*   **AI Matching**: 3-4 hours (Prompt engineering, Resume text extraction, UI visualization).
*   **Cover Letter**: 2 hours (Prompt refinement, Frontend text streaming).

**Total**: ~1-2 Days for valid MVP.
